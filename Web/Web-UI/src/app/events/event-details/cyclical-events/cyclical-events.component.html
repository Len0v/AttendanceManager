<div fxLayout="row" *ngIf="editEnabled && editAllFutureEvents">
  <div fxFlex="20"></div>
  <div fxFlex="60">
    <div class="alert alert-warning" role="alert">
      <strong>Warning!</strong> Editing this event will be apply to all incoming events of this type.
    </div>
  </div>
  <div fxFlex="20"></div>
</div>

<div fxLayout="row" *ngIf="(!editEnabled && !editAllFutureEvents) || (editEnabled && !editAllFutureEvents)">
  <br/>
</div>

<div fxLayout="row">
  <div fxFlex="20"></div>
  <div fxFlex="60">
    <div fxLayout="row">
      <div fxFlex="10">
        <button md-raised-button [disabled]="!editEnabled" class="save-button" (click)="save()">Save</button>
      </div>
      <div fxFlex="10">
        <button md-raised-button [disabled]="!editEnabled" class="cancel-button">Cancel</button>
      </div>
      <div fxFlex="70"></div>
      <div fxFlex="10">
        <button md-raised-button [disabled]="editEnabled" class="edit-button" (click)="enableEditMode()">Edit</button>
      </div>
    </div>
  </div>
  <div fxFlex="20"></div>
</div>

<div fxLayout="row" class="event-details-accordion-container">
  <div fxFlex="20"></div>
  <div fxFlex="60">
    <form #heroForm="ngForm">
      <ngb-accordion activeIds="basicInfoPanel">
        <ngb-panel id="basicInfoPanel">
          <ng-template ngbPanelTitle>
            <p class="event-details-accordion-title">Basic informations</p>
          </ng-template>
          <ng-template ngbPanelContent class="event-details-panel-template">
            <div fxLayout="row">
              <div fxFlex="100" *ngIf="!editEnabled">
                <a class="event-details-panel-element-title">Name: </a> {{event.name}}
              </div>
              <div fxFlex="100" *ngIf="editEnabled">
                <md-input-container style="width: 100%;">
                  <input mdInput placeholder="Name" value="{{event.name}}">
                </md-input-container>
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row">
              <div fxFlex="50" *ngIf="!editEnabled">
                <a class="event-details-panel-element-title">Status:</a>
                <a *ngIf="event.eventStatus === 0">Incoming</a>
                <a *ngIf="event.eventStatus === 1">Active</a>
                <a *ngIf="event.eventStatus === 2">Expired</a>
              </div>
              <div fxFlex="50" *ngIf="editEnabled">
                <md-input-container style="width: 100%;" *ngIf="event.eventStatus === 0">
                  <input mdInput placeholder="Status" disabled value="Incoming">
                </md-input-container>
                <md-input-container style="width: 100%;" *ngIf="event.eventStatus === 1">
                  <input mdInput placeholder="Status" disabled value="Active">
                </md-input-container>
                <md-input-container style="width: 100%;" *ngIf="event.eventStatus === 2">
                  <input mdInput placeholder="Status" disabled value="Expired">
                </md-input-container>
              </div>
              <div fxFlex="50" *ngIf="!editEnabled">
                <a class="event-details-panel-element-title">Restricted: </a>
                <a *ngIf="event.isRestricted">Yes</a>
                <a *ngIf="!event.isRestricted">No</a>
              </div>
              <div fxFlex="50" *ngIf="editEnabled">
                <md-checkbox color="primary" #restrictedCheckbox
                             (change)="event.isRestricted = restrictedCheckbox.checked"
                             [checked]="event.isRestricted"> Restricted
                </md-checkbox>
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row"
                 *ngIf="(!editEnabled && event.isCyclical) || (event.eventStatus === 2 && event.isCyclical)">
              <div fxFlex="50" *ngIf="!editEnabled">
                <a class="event-details-panel-element-title">Every: </a>{{event.cycleIntervalWeekNumber}} week.
              </div>
              <div fxFlex="50" *ngIf="editEnabled">
                <md-input-container style="width: 160px;">
                  <input type="number" mdInput placeholder="Every ... week" value="{{event.cycleIntervalWeekNumber}}"
                         min="1">
                </md-input-container>
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row" *ngIf="editEnabled && (event.eventStatus !== 2)">
              <div fxFlex="50">
                <md-checkbox color="primary" #cyclicalCheckbox
                             (change)="event.isCyclical = cyclicalCheckbox.checked"
                             [checked]="event.isCyclical"> Cyclic
                </md-checkbox>
              </div>
              <div fxFlex="50" *ngIf="event.isCyclical">
                <md-input-container style="width: 100%;">
                  <input type="number" mdInput placeholder="Every ... week" value="{{event.cycleIntervalWeekNumber}}"
                         min="1">
                </md-input-container>
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row"
                 *ngIf="(event.eventStatus === 0 || event.eventStatus === 2) && !editEnabled">
              <div fxFlex="50">
                <a class="event-details-panel-element-title">Next event date: </a>{{event.date | date: 'dd/MM/yyyy'}}
              </div>
              <div fxFlex="50">
                <a class="event-details-panel-element-title">Time:</a>
                {{event.timeSlot.beginTime | amUtc | amDateFormat: 'HH:mm'}} - {{event.timeSlot.endTime | amUtc |
                amDateFormat: 'HH:mm'}}
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row"
                 *ngIf="(event.eventStatus === 0 || event.eventStatus === 2) && editEnabled">
              <div fxFlex="50">
                <label class="next-date-label">Next event date: </label>
                <div class="input-group">
                  <input class="form-control" name="data" [(ngModel)]="modelDate" ngbDatepicker
                         #datePicker="ngbDatepicker" [minDate]="minDate">
                  <div class="input-group-addon" (click)="datePicker.toggle()">
                    <i class="material-icons calendar-icon">perm_contact_calendar</i>
                  </div>
                </div>
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row"
                 *ngIf="(event.eventStatus === 0 || event.eventStatus === 2) && editEnabled">
              <div fxFlex="100" class="form-inline">
                <label class="label-text label-text-from">From: </label>
                <ngb-timepicker [(ngModel)]="modelBeginTime" name="beginTime"></ngb-timepicker>
                <label class="label-text label-text-to">To: </label>
                <ngb-timepicker [(ngModel)]="modelEndTime" name="endTime"></ngb-timepicker>
              </div>
            </div>
          </ng-template>
        </ngb-panel>
        <ngb-panel *ngIf="event.courseUnit">
          <ng-template ngbPanelTitle>
            <p class="event-details-accordion-title">Course informations</p>
          </ng-template>
          <ng-template ngbPanelContent class="event-details-panel-template">
            <div fxLayout="row" *ngIf="!editEnabled">
              <div fxFlex="50">
                <a class="event-details-panel-element-title">Name: </a><a *ngIf="event.courseUnit">{{event.courseUnit.course.courseName}}</a>
              </div>
              <div fxFlex="50">
                <a class="event-details-panel-element-title">ECTS: </a><a *ngIf="event.courseUnit">{{event.courseUnit.course.ects}}</a>
              </div>
            </div>
            <div fxLayout="row" *ngIf="editEnabled">
              <div fxFlex="50">
                <md-input-container style="width: 100%;">
                  <input mdInput placeholder="Name" disabled value="{{event.courseUnit.course.courseName}}">
                </md-input-container>
              </div>
              <div fxFlex="50">
                <md-input-container style="width: 100%;">
                  <input mdInput placeholder="ECTS" disabled value="{{event.courseUnit.course.ects}}">
                </md-input-container>
              </div>
            </div>
            <div fxLayout="row" class="event-details-panel-row" *ngIf="!editEnabled">
              <div fxFlex="50">
                <a class="event-details-panel-element-title">Course total hours: </a><a *ngIf="event.courseUnit">{{event.courseUnit.courseType.hoursNumber}}</a>
              </div>
            </div>
            <div fxLayout="row" class="event-detail-panel-row" *ngIf="editEnabled">
              <div fxFlex="50">
                <md-input-container style="width: 100%;">
                  <input mdInput placeholder="Course total hours" disabled value="{{event.courseUnit.courseType.hoursNumber}}">
                </md-input-container>
              </div>
            </div>
          </ng-template>
        </ngb-panel>
        <ngb-panel *ngIf="event.lecturer">
          <ng-template ngbPanelTitle>
            <p class="event-details-accordion-title">Lecturer informations</p>
          </ng-template>
          <ng-template ngbPanelContent class="event-details-panel-template">
            <div fxLayout="row">
              <div fxFlex="50">
                <a class="event-details-panel-element-title">Name: </a>{{event.lecturer.name}}
              </div>
              <div fxFlex="50">
                <a class="event-details-panel-element-title">Surname: </a>{{event.lecturer.surname}}
              </div>
            </div>
          </ng-template>
        </ngb-panel>
      </ngb-accordion>
    </form>
  </div>
  <div fxFlex="20"></div>
</div>